<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ê³µë³µ ê¸°ì ì˜ ìŒì‹ (Final)</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Pretendard', sans-serif;
            height: 100vh; overflow: hidden; color: #333;
            /* ìš”ì²­í•˜ì‹  'ê°€ì¥ ì˜ˆìœ' ì˜¤ë¡œë¼ ë°°ê²½ ë³µêµ¬ */
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 10s ease infinite;
            display: flex; justify-content: center; align-items: center;
            perspective: 1000px; /* 3D íš¨ê³¼ë¥¼ ìœ„í•œ ì›ê·¼ê° */
        }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* ë¡œë”© í™”ë©´ */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.5s;
        }
        .spinner {
            width: 50px; height: 50px; border: 5px solid #eee;
            border-top: 5px solid #23a6d5; border-radius: 50%;
            animation: spin 1s linear infinite; margin-bottom: 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* ì»¨í…Œì´ë„ˆ */
        .container {
            width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center;
            padding-top: 10vh; /* ìƒë‹¨ ë°°ì¹˜ */
            padding-bottom: 40vh; /* í•˜ë‹¨ ì—¬ë°± í™•ë³´ */
            justify-content: flex-start;
        }

        header { text-align: center; margin-bottom: 3vh; z-index: 10; }
        .badge {
            background: #fff; color: #d32f2f;
            padding: 5px 15px; border-radius: 20px;
            font-weight: 800; font-size: 0.9rem;
            display: inline-block; margin-bottom: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            animation: bounce 2s infinite;
        }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-5px);} 60% {transform: translateY(-3px);} }
        
        h1 {
            font-size: 2.2rem; font-weight: 900; color: #fff;
            line-height: 1.2; letter-spacing: -1px;
            text-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        /* 3D ì´ë¯¸ì§€ ì˜ì—­ */
        .visual-area {
            position: relative;
            width: 70vw; max-width: 280px;
            height: 70vw; max-height: 280px;
            margin-bottom: -30px;
            z-index: 1;
            /* 3D íšŒì „ íš¨ê³¼ */
            transform-style: preserve-3d;
        }
        
        .img-circle {
            width: 100%; height: 100%; border-radius: 50%;
            border: 6px solid #fff;
            box-shadow: 0 20px 60px rgba(0,0,0,0.25);
            overflow: hidden; background: #ddd;
            position: relative;
            backface-visibility: hidden; /* ë’·ë©´ ìˆ¨ê¹€ */
        }

        .food-img { width: 100%; height: 100%; object-fit: cover; }

        /* ìƒˆë¡œìš´ ì• ë‹ˆë©”ì´ì…˜: 3D í”Œë¦½ (ë’¤ì§‘íˆë©° ë“±ì¥) */
        .flip-in { animation: flipIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        @keyframes flipIn {
            0% { transform: rotateY(90deg) scale(0.8); opacity: 0; }
            100% { transform: rotateY(0deg) scale(1); opacity: 1; }
        }

        /* ìˆ«ì ì¹´ìš´í„° (ì˜ ë³´ì´ê²Œ) */
        .counter-box {
            position: absolute; top: 0; right: -10px;
            background: #111; color: #fff;
            width: 60px; height: 60px;
            border-radius: 50%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            border: 4px solid #fff; z-index: 20;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: rotate(10deg);
        }
        .count-num { font-size: 1.4rem; font-weight: 900; line-height: 1; }
        .count-total { font-size: 0.7rem; font-weight: 700; opacity: 0.7; }

        /* í…ìŠ¤íŠ¸ ì¹´ë“œ (ìŠ¬ë¦¼í•˜ê²Œ) */
        .glass-card {
            width: 85%; max-width: 350px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 45px 20px 20px 20px; /* ë†’ì´ ìµœì†Œí™” */
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            z-index: 2;
            transform: translateY(30px) scale(0.9); opacity: 0;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .glass-card.show { transform: translateY(0) scale(1); opacity: 1; }

        .title-text {
            display: block; font-size: 1.7rem; font-weight: 900;
            color: #222; margin-bottom: 5px; letter-spacing: -1px;
        }
        .desc-text {
            font-size: 1.05rem; color: #555; font-weight: 600;
            line-height: 1.4; word-break: keep-all;
        }

        .save-btn {
            position: absolute; bottom: 30px; right: 30px;
            background: rgba(0,0,0,0.7); color: #fff;
            padding: 8px 15px; border-radius: 20px;
            font-size: 0.8rem; border: none; cursor: pointer; z-index: 999;
        }
    </style>
</head>
<body>

    <div id="loader">
        <div class="spinner"></div>
        <p style="font-weight: 700; color:#666;">ê³ í™”ì§ˆ ì´ë¯¸ì§€ ì¤€ë¹„ ì¤‘...</p>
    </div>

    <div class="container">
        <header>
            <div class="badge">ğŸ”¥ 3ì¼ë§Œ ë“œì…”ë³´ì„¸ìš”</div>
            <h1>ê³µë³µì— ë¨¹ìœ¼ë©´<br>ì§€ë°© íƒ€ëŠ” ìŒì‹</h1>
        </header>

        <div class="visual-area" id="visualArea">
            <div class="counter-box">
                <span class="count-num" id="currentNum">1</span>
                <span class="count-total">/ 9</span>
            </div>
            <div class="img-circle">
                <img id="mainImg" src="" alt="Food" class="food-img">
            </div>
        </div>

        <div class="glass-card" id="infoCard">
            <span class="title-text" id="name">ë¡œë”© ì¤‘...</span>
            <span class="desc-text" id="desc">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</span>
        </div>
    </div>

    <button class="save-btn" onclick="downloadFile()" id="downBtn">ğŸ“¥ ì €ì¥</button>

    <script>
        // [ì´ë¯¸ì§€ êµì²´ ì™„ë£Œ] 6,7,8ë²ˆ ì˜¤ë¥˜ ìˆ˜ì • ë° ì•ˆì •ì ì¸ ë§í¬ë¡œ ë³€ê²½
        const foods = [
            { 
                n: "ë¯¸ì§€ê·¼í•œ ë¬¼", d: "ìëŠ” ë™ì•ˆ êµ³ì€ ëª¸ì„ ê¹¨ìš°ê³  ë…ì†Œë¥¼ ë°°ì¶œí•´ìš”.", 
                src: "https://images.unsplash.com/photo-1548839140-29a749e1cf4d?w=600&q=80" 
            },
            { 
                n: "ì‚¶ì€ ë‹¬ê±€", d: "ìµœê³ ì˜ ë‹¨ë°±ì§ˆ! ì ì‹¬ê¹Œì§€ ë°°ê°€ ì•ˆ ê³ íŒŒìš”.", 
                src: "https://images.unsplash.com/photo-1491524062933-cb0289261700?w=600&q=80" 
            },
            { 
                n: "ì•„ë³´ì¹´ë„", d: "ì§€ë°©ì„ íƒœìš°ëŠ” 'ì°©í•œ ì§€ë°©'ì´ ê°€ë“í•´ìš”.", 
                src: "https://images.unsplash.com/photo-1601039641847-7857b994d704?w=600&q=80" 
            },
            { 
                n: "ê·¸ë¦­ ìš”ê±°íŠ¸", d: "ìœ ì‚°ê·  í­íƒ„! ë±ƒì‚´ ë¹¼ëŠ” ë° í•„ìˆ˜.", 
                src: "https://images.unsplash.com/photo-1488477181946-6428a0291777?w=600&q=80" 
            },
            { 
                n: "ë¸”ë£¨ë² ë¦¬", d: "ë‡Œì„¸í¬ ê¹¨ìš°ëŠ” ê°•ë ¥í•œ í•­ì‚°í™” í‘¸ë“œ.", 
                src: "https://images.unsplash.com/photo-1498557850523-fd3d118b962e?w=600&q=80" 
            },
            { 
                n: "ì–‘ë°°ì¶”", d: "ìœ„ì¥ ë³´í˜¸ì•½! ì† ì“°ë¦¼ ì—†ì´ í¸ì•ˆí•˜ê²Œ.", 
                src: "https://images.unsplash.com/photo-1550179294-325d22227d8e?w=600&q=80" 
            },
            // [New] ê²¬ê³¼ë¥˜ (ë§í¬ ë³€ê²½)
            { 
                n: "ì•„ëª¬ë“œ & í˜¸ë‘", d: "í˜ˆë‹¹ì„ ì¡ì•„ì£¼ëŠ” ì²œì—° ì‹ìš• ì–µì œì œ.", 
                src: "https://images.unsplash.com/photo-1516054575922-f0b8eeadec1a?w=600&q=80" 
            },
            // [New] ë°©íƒ„ ì»¤í”¼ (ë§í¬ ë³€ê²½)
            { 
                n: "ë°©íƒ„ ì»¤í”¼", d: "ì§€ë°© ì—°ì†Œ ë¶€ìŠ¤í„°! í™œë ¥ì´ ì†Ÿì•„ë‚˜ìš”.", 
                src: "https://images.unsplash.com/photo-1621255531580-0c35478d5916?w=600&q=80" 
            },
            // [New] ì• ì‚¬ë¹„ (ë§í¬ ë³€ê²½ - ì‚¬ê³¼ ì‹ì´ˆ ëŠë‚Œ í™•ì‹¤í•œ ì‚¬ì§„)
            { 
                n: "ì• ì‚¬ë¹„ (ì‹ì´ˆ)", d: "í˜ˆë‹¹ ìŠ¤íŒŒì´í¬ ë°©ì–´! ë¬¼ì— íƒ€ ë“œì„¸ìš”.", 
                src: "https://images.unsplash.com/photo-1565557623262-b51c2513a641?w=600&q=80" 
            }
        ];

        let idx = 0;
        const imgEl = document.getElementById('mainImg');
        const visualArea = document.getElementById('visualArea');
        const cardEl = document.getElementById('infoCard');
        const nameEl = document.getElementById('name');
        const descEl = document.getElementById('desc');
        const currentNum = document.getElementById('currentNum');
        const loader = document.getElementById('loader');

        // í”„ë¦¬ë¡œë”©
        let loadedCount = 0;
        const totalImages = foods.length;

        function preloadImages() {
            foods.forEach(item => {
                const img = new Image();
                img.src = item.src;
                const onFinish = () => {
                    loadedCount++;
                    if (loadedCount === totalImages) {
                        setTimeout(() => {
                            loader.style.opacity = '0';
                            setTimeout(() => { loader.style.display = 'none'; startAnimation(); }, 500);
                        }, 500);
                    }
                };
                img.onload = onFinish;
                img.onerror = onFinish;
            });
        }

        function updateDisplay() {
            const item = foods[idx];

            // 1. 3D Flip ì• ë‹ˆë©”ì´ì…˜ ì¬ì‹¤í–‰ íŠ¸ë¦­
            visualArea.classList.remove('flip-in');
            void visualArea.offsetWidth; // ë¦¬í”Œë¡œìš°
            
            // ì´ë¯¸ì§€ êµì²´
            imgEl.src = item.src;
            
            // ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
            visualArea.classList.add('flip-in');

            // 2. í…ìŠ¤íŠ¸ êµì²´
            currentNum.innerText = idx + 1;
            nameEl.innerText = item.n;
            descEl.innerText = item.d;

            // 3. ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜ (íŠ€ì–´ì˜¤ë¦„)
            cardEl.classList.remove('show');
            setTimeout(() => { cardEl.classList.add('show'); }, 150);

            idx = (idx + 1) % foods.length;
        }

        function startAnimation() {
            updateDisplay();
            // 2ì´ˆë§ˆë‹¤ ë³€ê²½
            setInterval(updateDisplay, 2000);
        }

        preloadImages();

        function downloadFile() {
            const btn = document.getElementById('downBtn');
            btn.style.display = 'none';
            const htmlContent = document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'diet_food_final_v2.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            setTimeout(() => { btn.style.display = 'block'; }, 1000);
        }
    </script>
</body>
</html>
